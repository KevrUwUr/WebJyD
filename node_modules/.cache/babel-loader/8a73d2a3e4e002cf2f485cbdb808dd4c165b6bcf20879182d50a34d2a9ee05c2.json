{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/EQUIPO/Desktop/ProyectoKev/REACT/WebJyD/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/EQUIPO/Desktop/ProyectoKev/REACT/WebJyD/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{show_alert}from\"../../Functions\";var urlLog=\"http://localhost:7284/api/authentication/login\";var urlRefresh=\"http://localhost:7284/api/authentication/refresh\";var accessToken=\"\";var refreshToken=\"\";var InicioSesion=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(username,password){var response,data,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(urlLog,{Username:username,Password:password});case 3:response=_context.sent;data=response.data,status=response.status;accessToken=data===null||data===void 0?void 0:data.accessToken;refreshToken=data===null||data===void 0?void 0:data.refreshToken;if(!(!accessToken||!refreshToken)){_context.next=9;break;}throw new Error(\"No se recibió un token de acceso o un token de actualización\");case 9:return _context.abrupt(\"return\",{accessToken:accessToken,refreshToken:refreshToken});case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.error(\"Error:\",_context.t0);show_alert(\"Datos de acceso inválidos\");throw _context.t0;case 17:case\"end\":return _context.stop();}},_callee,null,[[0,12]]);}));return function InicioSesion(_x,_x2){return _ref.apply(this,arguments);};}();var RefreshToken=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,data,status;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(urlRefresh,{accessToken:accessToken,refreshToken:refreshToken});case 3:response=_context2.sent;data=response.data,status=response.status;accessToken=data===null||data===void 0?void 0:data.accessToken;if(accessToken){_context2.next=8;break;}throw new Error(\"No se recibió un nuevo token de acceso al refrescar\");case 8:return _context2.abrupt(\"return\",accessToken);case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.error(\"Error al refrescar el token:\",_context2.t0);show_alert(\"Error al refrescar el token\");throw _context2.t0;case 16:case\"end\":return _context2.stop();}},_callee2,null,[[0,11]]);}));return function RefreshToken(){return _ref2.apply(this,arguments);};}();export{InicioSesion,RefreshToken};","map":{"version":3,"names":["axios","show_alert","urlLog","urlRefresh","accessToken","refreshToken","InicioSesion","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","username","password","response","data","status","wrap","_callee$","_context","prev","next","post","Username","Password","sent","Error","abrupt","t0","console","error","stop","_x","_x2","apply","arguments","RefreshToken","_ref2","_callee2","_callee2$","_context2"],"sources":["C:/Users/EQUIPO/Desktop/ProyectoKev/REACT/WebJyD/src/assets/js/Authorization.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { show_alert } from \"../../Functions\";\r\n\r\nconst urlLog = \"http://localhost:7284/api/authentication/login\";\r\nconst urlRefresh = \"http://localhost:7284/api/authentication/refresh\";\r\n\r\nlet accessToken = \"\";\r\nlet refreshToken = \"\";\r\n\r\nconst InicioSesion = async (username, password) => {\r\n  try {\r\n    const response = await axios.post(urlLog, {\r\n      Username: username,\r\n      Password: password,\r\n    });\r\n\r\n    const { data, status } = response;\r\n\r\n    accessToken = data?.accessToken;\r\n    refreshToken = data?.refreshToken;\r\n\r\n    if (!accessToken || !refreshToken) {\r\n      throw new Error(\r\n        \"No se recibió un token de acceso o un token de actualización\"\r\n      );\r\n    }\r\n\r\n    return { accessToken, refreshToken };\r\n  } catch (error) {\r\n    console.error(\"Error:\", error);\r\n    show_alert(\"Datos de acceso inválidos\");\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst RefreshToken = async () => {\r\n  try {\r\n    const response = await axios.post(urlRefresh, {\r\n      accessToken,\r\n      refreshToken,\r\n    });\r\n\r\n    const { data, status } = response;\r\n\r\n    accessToken = data?.accessToken;\r\n\r\n    if (!accessToken) {\r\n      throw new Error(\"No se recibió un nuevo token de acceso al refrescar\");\r\n    }\r\n\r\n    return accessToken;\r\n  } catch (error) {\r\n    console.error(\"Error al refrescar el token:\", error);\r\n    show_alert(\"Error al refrescar el token\");\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport { InicioSesion, RefreshToken };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}